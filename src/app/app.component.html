<main class="btg-layout">
  <header class="main-header">
    <h1>Gestão de Limites PIX</h1>
    <p>Banco KRT</p>
  </header>

  <div class="main-grid">
    <div class="management-column">
      <section class="card">
        <h2>Buscar Cliente</h2>
        <div class="form-group">
          <label for="documento">Documento</label>
          <input id="documento" [(ngModel)]="documentoBusca" type="text" placeholder="Digite o documento">
        </div>
        <div class="form-group">
          <label for="contaId">ID da Conta</label>
          <input id="contaId" [(ngModel)]="contaIdBusca" type="text" placeholder="Digite o ID da conta">
        </div>
        <button class="btn btn-primary" (click)="buscarCliente()" [disabled]="isLoading">
          {{ isLoading ? 'Buscando...' : 'Buscar' }}
        </button>
      </section>

      <section class="card">
        <h2>Cadastrar Novo Cliente</h2>
        <div class="form-group">
          <label for="new-documento">Documento</label>
          <input id="new-documento" [(ngModel)]="novoCliente.documento" type="text" placeholder="CPF/CNPJ">
        </div>
        <div class="form-group">
          <label for="new-contaId">ID da Conta</label>
          <input id="new-contaId" [(ngModel)]="novoCliente.contaId" type="text" placeholder="Ex: 1234#56789-0">
        </div>
        <div class="form-group">
          <label for="new-agencia">Agência</label>
          <input id="new-agencia" [(ngModel)]="novoCliente.numeroAgencia" type="text" placeholder="Ex: 1234">
        </div>
        <div class="form-group">
          <label for="new-conta">Conta</label>
          <input id="new-conta" [(ngModel)]="novoCliente.numeroConta" type="text" placeholder="Ex: 56789-0">
        </div>
        <div class="form-group">
          <label for="new-limite">Limite PIX</label>
          <input id="new-limite" [(ngModel)]="novoCliente.limitePix" type="number" placeholder="Ex: 5000">
        </div>
        <button class="btn btn-primary" (click)="criarCliente()" [disabled]="isCreating">
          {{ isCreating ? 'Criando...' : 'Criar Cliente' }}
        </button>
      </section>
    </div>

    <div class="results-column">
      <div *ngIf="isLoading" class="feedback-card info">Carregando...</div>

      <div *ngIf="!cliente && !isLoading" class="feedback-card info">
        Busque por um cliente para ver os detalhes e realizar ações.
      </div>

      <section *ngIf="cliente" class="card result-card">
        <h2>Detalhes do Cliente</h2>
        <div class="result-item"><span>Documento</span><strong>{{ cliente.documento }}</strong></div>
        <div class="result-item"><span>ID da Conta</span><strong>{{ cliente.contaId }}</strong></div>
        <div class="result-item"><span>Agência</span><strong>{{ cliente.numeroAgencia }}</strong></div>
        <div class="result-item"><span>Conta</span><strong>{{ cliente.numeroConta }}</strong></div>

        <div class="result-item interactive">
          <label for="update-limite">Limite PIX</label>
          <div class="input-group">
            <input id="update-limite" [(ngModel)]="cliente.limitePix" type="number">
            <button class="btn btn-secondary" (click)="atualizarLimite()" [disabled]="isUpdating || isDeleting || isProcessing">
              {{ isUpdating ? '...' : 'Atualizar' }}
            </button>
          </div>
        </div>

        <div class="transaction-section">
          <h3>Processar Transação PIX</h3>
          <div class="input-group">
            <input [(ngModel)]="valorTransacao" type="number" placeholder="Valor da transação">
            <button class="btn btn-primary" (click)="processarTransacao()" [disabled]="isProcessing || isUpdating || isDeleting">
              {{ isProcessing ? '...' : 'Processar PIX' }}
            </button>
          </div>
        </div>

        <div class="delete-section">
          <button class="btn btn-danger" (click)="deletarCliente()" [disabled]="isUpdating || isDeleting || isProcessing">
            Deletar Registro do Cliente
          </button>
        </div>
      </section>
    </div>
  </div>
</main>
